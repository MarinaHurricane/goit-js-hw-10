{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["// Описаний в документації\nimport flatpickr from \"flatpickr\";\n// Додатковий імпорт стилів\nimport \"flatpickr/dist/flatpickr.min.css\";\n\n// Описаний у документації\nimport iziToast from \"izitoast\";\n// Додатковий імпорт стилів\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\nconst refs = {\n    input: document.querySelector('#datetime-picker'),\n    startBtn: document.querySelector('[data-start]'),\n    days: document.querySelector('[data-days]'),\n    hours: document.querySelector('[data-hours]'),\n    minutes: document.querySelector('[data-minutes]'),\n    seconds: document.querySelector('[data-seconds]'),\n};\n\nlet userSelectedDate = null;\nlet countdownInterval = null;\n\n\n    flatpickr(refs.input, {\n    enableTime: true,\n    // dateFormat: \"Y-m-d H:i\",\n    time_24hr: true,\n    defaultDate: new Date(),\n    minuteIncrement: 1,\n    onClose(selectedDates) {\n        const pickedDate = selectedDates[0];\n        if((pickedDate) <= Date.now()) {\n            iziToast.show({\n              message: 'Please choose a date in the future',\n              color: 'red',\n              position: 'topRight',\n              messageSize: '20',\n            });\n            refs.startBtn.disabled = true;\n        } else {\n            userSelectedDate = pickedDate; \n            refs.startBtn.disabled = false;\n    }\n    },\n});\n\n    \n    refs.startBtn.addEventListener('click', () => {\n        if(!userSelectedDate) return;\n        refs.startBtn.disabled = true;\n      \n        startCountdown(userSelectedDate);\n\n        refs.startBtn.classList.add('no-action');\n        refs.input.disabled = true;\n\n    });\n\n    function startCountdown(date) {\n        clearInterval(countdownInterval);\n        countdownInterval = setInterval(() => {\n            const now = Date.now();\n            const timeDifference = date.getTime() - now;\n\n            if(timeDifference <= 0) {\n                clearInterval(countdownInterval);\n                addLeadingZero(0, 0, 0, 0);\n                refs.input.disabled = false;\n                refs.startBtn.classList.remove('no-action');\n                return;\n            }\n            const {days, hours, minutes, seconds} = convertMs(timeDifference);\n            addLeadingZero(days, hours, minutes, seconds);\n            \n        }, 1000);\n    }\n\n    function addLeadingZero(days, hours, minutes, seconds) {\n        refs.days.textContent = String(days).padStart(2, '0');\n        refs.hours.textContent = String(hours).padStart(2, '0');\n        refs.minutes.textContent = String(minutes).padStart(2, '0');\n        refs.seconds.textContent = String(seconds).padStart(2, '0');\n    }\n\n    function convertMs(ms) {\n        // Number of milliseconds per unit of time\n        const second = 1000;\n        const minute = second * 60;\n        const hour = minute * 60;\n        const day = hour * 24;\n      \n        // Remaining days\n        const days = Math.floor(ms / day);\n        // Remaining hours\n        const hours = Math.floor((ms % day) / hour);\n        // Remaining minutes\n        const minutes = Math.floor(((ms % day) % hour) / minute);\n        // Remaining seconds\n        const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n      \n        return { days, hours, minutes, seconds };\n      }\n\n\n\n\n\n\n    //   const refs = {\n    //     input: document.querySelector('#datetime-picker'),\n    //     startBtn: document.querySelector('[data-start]'),\n    //     days: document.querySelector('[data-days]'),\n    //     hours: document.querySelector('[data-hours]'),\n    //     minutes: document.querySelector('[data-minutes]'),\n    //     seconds: document.querySelector('[data-seconds]'),\n    // };\n    \n    // let userSelectedDate = null;\n    // let countdownInterval = null;\n\n    // flatpickr(refs.input, {\n    //          enableTime: true,\n    //           dateFormat: \"Y-m-d H:i\",\n    //       time_24hr: true,\n    //          defaultDate: new Date(),\n    //          minuteIncrement: 1,\n    //          onClose(selectedDates) {\n    //             const pickedDate = selectedDates[0];\n    //             if(pickedDate <= Date.now()) {\n    //                 alert('Pleaseselect a date in future!');\n    //                 refs.startBtn.disabled = true;\n    //             } else {\n    //                 userSelectedDate = pickedDate;\n    //                 refs.startBtn.disabled = false;\n    //             }\n    //          }\n\n    //         });\n\n    //         refs.startBtn.addEventListener('click', () => {\n    //             if(!userSelectedDate) return;\n    //             refs.startBtn.disabled = true;\n    //             startCountdown(userSelectedDate);\n            \n    //         });\n\n\n    //         function startCountdown(futureDate) {\n    //             clearInterval(startCountdown);\n    //             countdownInterval = setInterval( () => {\n    //                 const now = Date.now();\n    //                 const future = futureDate;\n    //                 const timeDifference = future - now;\n               \n                 \n    //             if(countdownInterval <= 0) {\n    //                 clearInterval(startCountdown);\n    //                 addLeadingZero(0, 0, 0, 0);\n    //                 alert('Countdown finished!')\n                     \n    //             }\n    //              const { days, hours, minutes, seconds } = convertMs(timeDifference)\n    //             addLeadingZero (days, hours, minutes, seconds);\n    //         }, 1000) \n\n    //         };\n\n            \n\n\n    //         function addLeadingZero(days, hours, minutes, seconds) {\n    //             refs.days.textContent = String(days).padStart(2, '0');\n    //             refs.hours.textContent = String(hours).padStart(2, '0');\n    //             refs.minutes.textContent = String(minutes).padStart(2, '0');\n    //             refs.seconds.textContent = String(seconds).padStart(2, '0');\n    //         }\n\n    //         function convertMs(ms) {\n    //             // Number of milliseconds per unit of time\n    //             const second = 1000;\n    //             const minute = second * 60;\n    //             const hour = minute * 60;\n    //             const day = hour * 24;\n              \n    //             // Remaining days\n    //             const days = Math.floor(ms / day);\n    //             // Remaining hours\n    //             const hours = Math.floor((ms % day) / hour);\n    //             // Remaining minutes\n    //             const minutes = Math.floor(((ms % day) % hour) / minute);\n    //             // Remaining seconds\n    //             const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n              \n    //             return { days, hours, minutes, seconds };\n    //           }\n              \n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  \n\n\n\n\n\n\n  "],"names":["refs","userSelectedDate","countdownInterval","flatpickr","selectedDates","pickedDate","iziToast","startCountdown","date","now","timeDifference","addLeadingZero","days","hours","minutes","seconds","convertMs","ms"],"mappings":"0IAWA,MAAMA,EAAO,CACT,MAAO,SAAS,cAAc,kBAAkB,EAChD,SAAU,SAAS,cAAc,cAAc,EAC/C,KAAM,SAAS,cAAc,aAAa,EAC1C,MAAO,SAAS,cAAc,cAAc,EAC5C,QAAS,SAAS,cAAc,gBAAgB,EAChD,QAAS,SAAS,cAAc,gBAAgB,CACpD,EAEA,IAAIC,EAAmB,KACnBC,EAAoB,KAGpBC,EAAUH,EAAK,MAAO,CACtB,WAAY,GAEZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQI,EAAe,CACnB,MAAMC,EAAaD,EAAc,CAAC,EAC9BC,GAAe,KAAK,OACpBC,EAAS,KAAK,CACZ,QAAS,qCACT,MAAO,MACP,SAAU,WACV,YAAa,IAC3B,CAAa,EACDN,EAAK,SAAS,SAAW,KAEzBC,EAAmBI,EACnBL,EAAK,SAAS,SAAW,GAEjC,CACJ,CAAC,EAGGA,EAAK,SAAS,iBAAiB,QAAS,IAAM,CACtCC,IACJD,EAAK,SAAS,SAAW,GAEzBO,EAAeN,CAAgB,EAE/BD,EAAK,SAAS,UAAU,IAAI,WAAW,EACvCA,EAAK,MAAM,SAAW,GAE1B,CAAC,EAED,SAASO,EAAeC,EAAM,CAC1B,cAAcN,CAAiB,EAC/BA,EAAoB,YAAY,IAAM,CAClC,MAAMO,EAAM,KAAK,IAAG,EACdC,EAAiBF,EAAK,QAAO,EAAKC,EAExC,GAAGC,GAAkB,EAAG,CACpB,cAAcR,CAAiB,EAC/BS,EAAe,EAAG,EAAG,EAAG,CAAC,EACzBX,EAAK,MAAM,SAAW,GACtBA,EAAK,SAAS,UAAU,OAAO,WAAW,EAC1C,MACJ,CACA,KAAM,CAAC,KAAAY,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAIC,EAAUN,CAAc,EAChEC,EAAeC,EAAMC,EAAOC,EAASC,CAAO,CAEhD,EAAG,GAAI,CACX,CAEA,SAASJ,EAAeC,EAAMC,EAAOC,EAASC,EAAS,CACnDf,EAAK,KAAK,YAAc,OAAOY,CAAI,EAAE,SAAS,EAAG,GAAG,EACpDZ,EAAK,MAAM,YAAc,OAAOa,CAAK,EAAE,SAAS,EAAG,GAAG,EACtDb,EAAK,QAAQ,YAAc,OAAOc,CAAO,EAAE,SAAS,EAAG,GAAG,EAC1Dd,EAAK,QAAQ,YAAc,OAAOe,CAAO,EAAE,SAAS,EAAG,GAAG,CAC9D,CAEA,SAASC,EAAUC,EAAI,CAQnB,MAAML,EAAO,KAAK,MAAMK,EAAK,KAAG,EAE1BJ,EAAQ,KAAK,MAAOI,EAAK,MAAO,IAAI,EAEpCH,EAAU,KAAK,MAAQG,EAAK,MAAO,KAAQ,GAAM,EAEjDF,EAAU,KAAK,MAASE,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}